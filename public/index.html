<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PPLGTWO - Website Kelas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="shortcut icon"
      href="assets/images/favicon.jpg?v=2"
      type="image/png"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#6366f1",
              secondary: "#8b5cf6",
              accent: "#06b6d4",
              dark: "#0f172a",
              darker: "#020617",
              darkest: "#030712",
              light: "#f8fafc",
              gray: "#64748b",
              "card-bg": "rgba(255, 255, 255, 0.05)",
              glass: "rgba(255, 255, 255, 0.08)",
              success: "#10b981",
              warning: "#f59e0b",
              danger: "#ef4444",
            },
            fontFamily: {
              inter: ["Inter", "sans-serif"],
              space: ["Space Grotesk", "sans-serif"],
            },
            backgroundImage: {
              "gradient-main":
                "linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",
              "gradient-card":
                "linear-gradient(145deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",
              "gradient-hero":
                "radial-gradient(circle at 30% 40%, rgba(99, 102, 241, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 60%, rgba(139, 92, 246, 0.3) 0%, transparent 50%)",
            },
            animation: {
              float: "float 6s ease-in-out infinite",
              "pulse-slow": "pulse 3s ease-in-out infinite",
              "fade-in": "fadeIn 0.8s ease-in forwards",
              "slide-up": "slideUp 0.6s ease-out forwards",
              glow: "glow 2s ease-in-out infinite alternate",
              "bounce-slow": "bounce 2s infinite",
              shimmer: "shimmer 2s linear infinite",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-20px)" },
              },
              fadeIn: {
                "0%": { opacity: "0", transform: "translateY(30px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              slideUp: {
                "0%": { transform: "translateY(50px)", opacity: "0" },
                "100%": { transform: "translateY(0)", opacity: "1" },
              },
              glow: {
                "0%": { boxShadow: "0 0 20px rgba(99, 102, 241, 0.5)" },
                "100%": { boxShadow: "0 0 30px rgba(139, 92, 246, 0.8)" },
              },
              shimmer: {
                "0%": { backgroundPosition: "-1000px 0" },
                "100%": { backgroundPosition: "1000px 0" },
              },
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #0f172a 0%,
          #1e293b 50%,
          #334155 100%
        );
        background-attachment: fixed;
      }

      .glass-effect {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .hover-glow:hover {
        box-shadow: 0 20px 40px rgba(99, 102, 241, 0.4);
        transform: translateY(-8px);
      }

      .text-gradient {
        background: linear-gradient(135deg, #6366f1, #8b5cf6, #06b6d4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .floating-shapes {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
      }

      .floating-shapes::before,
      .floating-shapes::after {
        content: "";
        position: absolute;
        border-radius: 50%;
        opacity: 0.12;
        animation: float 8s ease-in-out infinite;
      }

      .floating-shapes::before {
        width: 250px;
        height: 250px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        top: 15%;
        left: 8%;
        animation-delay: -2s;
      }

      .floating-shapes::after {
        width: 180px;
        height: 180px;
        background: linear-gradient(135deg, #06b6d4, #8b5cf6);
        bottom: 15%;
        right: 8%;
        animation-delay: -4s;
      }

      .navbar-blur {
        background: rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .section-spacing {
        padding: 120px 0;
      }

      /* Admin Button */
      .admin-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 40;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 10px 25px rgba(99, 102, 241, 0.5);
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .admin-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 15px 35px rgba(99, 102, 241, 0.7);
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border-radius: 4px;
      }

      /* Loading states */
      .skeleton {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.05) 25%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0.05) 75%
        );
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 1rem;
      }

      /* Structure Organization Styles */
      .org-chart {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 3rem;
      }

      .org-level {
        display: flex;
        justify-content: center;
        gap: 2rem;
        flex-wrap: wrap;
        position: relative;
      }

      .org-card {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        text-align: center;
        min-width: 200px;
        transition: all 0.3s ease;
        position: relative;
      }

      .org-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(99, 102, 241, 0.3);
      }

      .org-card.leader {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.2),
          rgba(139, 92, 246, 0.1)
        );
        border: 1px solid rgba(99, 102, 241, 0.3);
      }

      .org-card.executive {
        background: linear-gradient(
          135deg,
          rgba(139, 92, 246, 0.15),
          rgba(6, 182, 212, 0.1)
        );
        border: 1px solid rgba(139, 92, 246, 0.25);
      }

      .org-card.staff {
        background: linear-gradient(
          135deg,
          rgba(6, 182, 212, 0.15),
          rgba(99, 102, 241, 0.1)
        );
        border: 1px solid rgba(6, 182, 212, 0.25);
      }

      .org-card.division {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.1),
          rgba(6, 182, 212, 0.15)
        );
        border: 1px solid rgba(99, 102, 241, 0.2);
      }

      /* Gallery Grid Styles */
      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        grid-auto-rows: 300px;
      }

      .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 1rem;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.5s ease;
      }

      .gallery-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(99, 102, 241, 0.4);
      }

      .gallery-item.featured {
        grid-column: span 2;
        grid-row: span 2;
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.7s ease;
      }

      .gallery-item:hover img {
        transform: scale(1.1);
      }

      .gallery-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to top,
          rgba(0, 0, 0, 0.8) 0%,
          rgba(0, 0, 0, 0.4) 50%,
          transparent 100%
        );
        opacity: 0;
        transition: opacity 0.5s ease;
        display: flex;
        align-items: flex-end;
        padding: 1.5rem;
      }

      .gallery-item:hover .gallery-overlay {
        opacity: 1;
      }

      @media (max-width: 768px) {
        .gallery-item.featured {
          grid-column: span 1;
          grid-row: span 1;
        }

        .gallery-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 1rem;
          grid-auto-rows: 250px;
        }
      }

      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 3px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border-radius: 3px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #5855eb, #7c3aed);
      }
    </style>
  </head>
  <body class="text-slate-100 overflow-x-hidden">
    <!-- Navigation -->
    <header
      class="fixed top-0 left-0 w-full z-50 navbar-blur transition-all duration-300"
    >
      <div class="container mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
          <div class="logo">
            <a
              href="#home"
              class="text-2xl font-space font-bold text-gradient hover:scale-105 transition-transform duration-300"
            >
              <span id="site-brand">PPLGTWO</span>
            </a>
          </div>

          <nav class="hidden md:block">
            <ul class="flex space-x-8">
              <li>
                <a
                  href="#home"
                  class="nav-link hover:text-primary transition-all duration-300 relative group"
                >
                  Home
                  <span
                    class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"
                  ></span>
                </a>
              </li>
              <li>
                <a
                  href="#gallery"
                  class="nav-link hover:text-primary transition-all duration-300 relative group"
                >
                  Gallery
                  <span
                    class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"
                  ></span>
                </a>
              </li>
              <li>
                <a
                  href="#structure"
                  class="nav-link hover:text-primary transition-all duration-300 relative group"
                >
                  Struktur
                  <span
                    class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"
                  ></span>
                </a>
              </li>
              <li>
                <a
                  href="#confess"
                  class="nav-link hover:text-primary transition-all duration-300 relative group"
                >
                  Confess
                  <span
                    class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"
                  ></span>
                </a>
              </li>
            </ul>
          </nav>

          <button
            id="mobile-menu-button"
            class="md:hidden p-2 rounded-lg hover:bg-glass transition-all duration-300"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>

        <!-- Mobile Menu -->
        <div
          id="mobile-menu"
          class="hidden md:hidden mt-4 glass-effect rounded-xl p-4 animate-fade-in"
        >
          <ul class="space-y-3">
            <li>
              <a
                href="#home"
                class="block py-2 px-4 rounded-lg hover:bg-primary/20 transition-all duration-300"
                >Home</a
              >
            </li>
            <li>
              <a
                href="#gallery"
                class="block py-2 px-4 rounded-lg hover:bg-primary/20 transition-all duration-300"
                >Gallery</a
              >
            </li>
            <li>
              <a
                href="#structure"
                class="block py-2 px-4 rounded-lg hover:bg-primary/20 transition-all duration-300"
                >Struktur</a
              >
            </li>
            <li>
              <a
                href="#confess"
                class="block py-2 px-4 rounded-lg hover:bg-primary/20 transition-all duration-300"
                >Confess</a
              >
            </li>
          </ul>
        </div>
      </div>
    </header>

    <main>
      <!-- Hero Section -->
      <section
        id="home"
        class="min-h-screen flex items-center justify-center relative overflow-hidden"
      >
        <div class="floating-shapes"></div>
        <div class="absolute inset-0 bg-gradient-hero"></div>

        <div class="container mx-auto px-6 text-center relative z-10">
          <div data-aos="fade-up">
            <div class="mb-8">
              <span
                class="inline-flex items-center px-4 py-2 bg-primary/20 border border-primary/30 rounded-full text-sm font-medium text-primary mb-6"
              >
                <span
                  class="w-2 h-2 bg-primary rounded-full mr-2 animate-pulse"
                ></span>
                <span id="welcome-text">Welcome to PPLGTWO Digital Space</span>
              </span>
            </div>

            <h1
              class="text-5xl md:text-7xl lg:text-8xl font-space font-bold mb-6 text-gradient animate-glow"
            >
              <span id="site-title">PPLGTWO</span>
            </h1>

            <p
              class="text-xl md:text-2xl text-slate-300 mb-12 max-w-4xl mx-auto leading-relaxed"
            >
              <span id="site-description"
                >Menciptakan masa depan digital dengan
                <span class="text-primary font-semibold">kreativitas</span>,
                <span class="text-secondary font-semibold">inovasi</span>, dan
                <span class="text-accent font-semibold">kolaborasi</span> yang
                tak terbatas</span
              >
            </p>

            <div class="flex flex-col sm:flex-row gap-6 justify-center mb-16">
              <a
                href="#gallery"
                class="group inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary to-secondary hover:from-primary/80 hover:to-secondary/80 rounded-full font-semibold transition-all duration-300 hover-glow"
              >
                <span class="mr-2">Explore Gallery</span>
                <svg
                  class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"
                  ></path>
                </svg>
              </a>
              <a
                href="#structure"
                class="px-8 py-4 glass-effect rounded-full font-semibold hover:bg-white/20 transition-all duration-300 border border-white/20"
              >
                Meet The Team
              </a>
            </div>

            <!-- Stats Counter -->
            <div
              class="grid grid-cols-2 md:grid-cols-4 gap-8 max-w-3xl mx-auto"
            >
              <div class="text-center p-4">
                <div
                  class="text-3xl md:text-4xl font-bold text-primary mb-2"
                  id="stat-students"
                >
                  40+
                </div>
                <div class="text-sm text-slate-400 uppercase tracking-wide">
                  Students
                </div>
              </div>
              <div class="text-center p-4">
                <div
                  class="text-3xl md:text-4xl font-bold text-secondary mb-2"
                  id="stat-projects"
                >
                  15+
                </div>
                <div class="text-sm text-slate-400 uppercase tracking-wide">
                  Projects
                </div>
              </div>
              <div class="text-center p-4">
                <div
                  class="text-3xl md:text-4xl font-bold text-accent mb-2"
                  id="stat-gallery"
                >
                  0
                </div>
                <div class="text-sm text-slate-400 uppercase tracking-wide">
                  Memories
                </div>
              </div>
              <div class="text-center p-4">
                <div class="text-3xl md:text-4xl font-bold text-primary mb-2">
                  1
                </div>
                <div class="text-sm text-slate-400 uppercase tracking-wide">
                  Big Family
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Scroll Indicator -->
        <div
          class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce-slow"
        >
          <div
            class="w-6 h-10 border-2 border-slate-300/50 rounded-full flex justify-center"
          >
            <div
              class="w-1 h-3 bg-gradient-to-b from-primary to-secondary rounded-full mt-2 animate-pulse"
            ></div>
          </div>
          <p class="text-xs text-slate-400 mt-2 text-center">Scroll Down</p>
        </div>
      </section>

      <!-- Gallery Section -->
      <section id="gallery" class="section-spacing relative">
        <div class="container mx-auto px-6">
          <div class="text-center mb-20">
            <h2
              class="text-4xl md:text-6xl font-space font-bold mb-6 text-gradient"
            >
              Class Gallery
            </h2>
            <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-8">
              Menangkap momen-momen berharga perjalanan kelas kami dalam setiap
              frame
            </p>
            <div
              class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"
            ></div>
          </div>

          <!-- Loading State -->
          <div id="gallery-loading" class="gallery-grid" data-aos="fade-up">
            <div class="skeleton"></div>
            <div class="skeleton"></div>
            <div class="skeleton"></div>
            <div class="skeleton"></div>
            <div class="skeleton"></div>
            <div class="skeleton"></div>
          </div>

          <!-- Gallery Content -->
          <div
            id="gallery-content"
            class="gallery-grid hidden"
            data-aos="fade-up"
          >
            <!-- Gallery items will be dynamically loaded here -->
          </div>

          <!-- Gallery Controls -->
          <div class="text-center mt-12 hidden" id="gallery-controls">
            <button
              id="load-more-gallery"
              class="px-8 py-3 glass-effect rounded-full font-semibold hover:bg-white/20 transition-all duration-300 border border-white/20"
            >
              Load More Photos
            </button>
          </div>
        </div>
      </section>

      <!-- Structure Section -->
      <section id="structure" class="section-spacing relative">
        <div class="container mx-auto px-6">
          <div class="text-center mb-20">
            <h2
              class="text-4xl md:text-6xl font-space font-bold mb-6 text-gradient"
            >
              STRUKTUR KELAS
            </h2>
            <p class="text-xl text-slate-400 max-w-3xl mx-auto mb-8">
              Tim solid yang membentuk fondasi kelas PPLGTWO
            </p>
            <div
              class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"
            ></div>
          </div>

          <!-- Loading State -->
          <div
            id="structure-loading"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 max-w-6xl mx-auto"
            data-aos="fade-up"
          >
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
            <div class="skeleton h-48"></div>
          </div>

          <!-- Structure Content -->
          <div
            id="structure-content"
            class="org-chart max-w-6xl mx-auto hidden"
            data-aos="fade-up"
          >
            <!-- Structure will be dynamically loaded here -->
          </div>
        </div>
      </section>

      <!-- Confess Section -->
      <section id="confess" class="section-spacing relative">
        <div class="container mx-auto px-6">
          <div class="text-center mb-20">
            <h2
              class="text-4xl md:text-6xl font-space font-bold mb-6 text-gradient"
            >
              Anonymous Confess
            </h2>
            <p class="text-xl text-slate-400 max-w-3xl mx-auto mb-8">
              Ruang aman untuk berbagi perasaan dan pemikiran secara anonim
              dengan komunitas kelas
            </p>
            <div
              class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"
            ></div>
          </div>

          <div class="max-w-5xl mx-auto">
            <div class="grid lg:grid-cols-2 gap-12">
              <!-- Confession Form -->
              <div data-aos="fade-right">
                <div
                  class="glass-effect rounded-2xl p-8 hover-glow sticky top-24"
                >
                  <div class="text-center mb-8">
                    <div
                      class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 flex items-center justify-center"
                    >
                      <svg
                        class="w-8 h-8 text-primary"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                        ></path>
                      </svg>
                    </div>
                    <h3
                      class="text-2xl font-space font-bold mb-2 text-gradient"
                    >
                      Share Your Thoughts
                    </h3>
                    <p class="text-slate-400">Anonymously and safely</p>
                  </div>

                  <form id="confess-form" class="space-y-6">
                    <div>
                      <label
                        class="block text-sm font-medium text-slate-300 mb-3"
                        >Pesan Anonim</label
                      >
                      <textarea
                        id="confess-message"
                        class="w-full bg-slate-800/50 border border-slate-600 rounded-xl p-4 text-slate-100 placeholder-slate-400 focus:ring-2 focus:ring-primary focus:border-primary transition-all duration-300 resize-none h-32"
                        placeholder="Tulis pesan rahasia di sini..."
                        maxlength="500"
                      ></textarea>
                      <div class="flex justify-between items-center mt-2">
                        <span class="text-xs text-slate-500"
                          >Maximum 500 characters</span
                        >
                        <span id="char-count" class="text-xs text-slate-500"
                          >0/500</span
                        >
                      </div>
                    </div>

                    <button
                      type="submit"
                      class="w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/80 hover:to-secondary/80 text-white font-semibold py-4 rounded-xl transition-all duration-300 hover-glow group disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      <span class="flex items-center justify-center space-x-2">
                        <svg
                          class="w-5 h-5 group-hover:rotate-12 transition-transform duration-300"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
                          ></path>
                        </svg>
                        <span id="submit-text">Kirim Pesan</span>
                      </span>
                    </button>
                  </form>

                  <div
                    class="mt-8 p-4 bg-primary/10 border border-primary/20 rounded-xl"
                  >
                    <div class="flex items-start space-x-3">
                      <svg
                        class="w-5 h-5 text-primary mt-0.5 flex-shrink-0"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        ></path>
                      </svg>
                      <div class="text-sm text-slate-300">
                        <p class="font-medium mb-2 text-primary">
                          Community Guidelines:
                        </p>
                        <ul class="text-slate-400 space-y-1">
                          <li>• Keep messages positive and respectful</li>
                          <li>• No personal attacks or offensive content</li>
                          <li>• Your identity remains completely anonymous</li>
                          <li>
                            • Help create a supportive environment for everyone
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Confessions List -->
              <div data-aos="fade-left">
                <div class="flex items-center justify-between mb-8">
                  <h3 class="text-2xl font-space font-bold">
                    Recent Confessions
                  </h3>
                  <button
                    id="refresh-confessions"
                    class="px-4 py-2 glass-effect rounded-lg hover:bg-white/10 transition-all duration-300 group"
                  >
                    <svg
                      class="w-4 h-4 group-hover:rotate-180 transition-transform duration-500"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                      ></path>
                    </svg>
                  </button>
                </div>

                <div
                  id="confess-list"
                  class="space-y-6 max-h-[700px] overflow-y-auto pr-2 custom-scrollbar"
                >
                  <!-- Loading state -->
                  <div id="confess-loading" class="text-center py-12">
                    <div
                      class="animate-spin w-8 h-8 border-2 border-primary/30 border-t-primary rounded-full mx-auto mb-4"
                    ></div>
                    <p class="text-slate-400">Loading confessions...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer
      class="section-spacing border-t border-slate-800 bg-darker/50 backdrop-blur-lg"
    >
      <div class="container mx-auto px-6">
        <div class="text-center mb-16">
          <h3
            class="text-3xl font-space font-bold text-gradient mb-6"
            id="footer-brand"
          >
            PPLGTWO
          </h3>
          <p
            class="text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed mb-8"
          >
            Membangun masa depan digital dengan semangat kolaborasi,
            kreativitas, dan inovasi yang tak terbatas. Bersama kita wujudkan
            impian generasi digital.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-12 mb-16">
          <div class="text-center">
            <h4 class="font-space font-semibold mb-6 text-slate-200 text-lg">
              Quick Navigation
            </h4>
            <div class="space-y-3">
              <a
                href="#home"
                class="block text-slate-400 hover:text-primary transition-colors duration-300 hover:translate-x-1 transform"
                >Home</a
              >
              <a
                href="#gallery"
                class="block text-slate-400 hover:text-primary transition-colors duration-300 hover:translate-x-1 transform"
                >Gallery</a
              >
              <a
                href="#structure"
                class="block text-slate-400 hover:text-primary transition-colors duration-300 hover:translate-x-1 transform"
                >Struktur</a
              >
              <a
                href="#confess"
                class="block text-slate-400 hover:text-primary transition-colors duration-300 hover:translate-x-1 transform"
                >Confess</a
              >
            </div>
          </div>

          <div class="text-center">
            <h4 class="font-space font-semibold mb-6 text-slate-200 text-lg">
              About Our Class
            </h4>
            <p class="text-slate-400 text-sm leading-relaxed">
              PPLGTWO adalah kelas yang penuh dengan semangat, kreativitas, dan
              persahabatan. Kami berkomitmen untuk terus berkembang dan saling
              mendukung dalam setiap langkah perjalanan.
            </p>
          </div>

          <div class="text-center">
            <h4 class="font-space font-semibold mb-6 text-slate-200 text-lg">
              Connect With Us
            </h4>
            <p class="text-slate-400 text-sm leading-relaxed mb-4">
              Mari bergabung dalam komunitas digital kami dan jadilah bagian
              dari keluarga besar PPLGTWO.
            </p>
            <div class="flex justify-center space-x-4">
              <div
                class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center"
              >
                <span class="text-primary text-sm font-bold">P2</span>
              </div>
              <a
                href="https://www.instagram.com/xi.pplgtwoarea_/"
                target="_blank"
                class="w-10 h-10 rounded-full bg-secondary/20 flex items-center justify-center transition-colors duration-300 hover:bg-secondary/40"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="text-secondary"
                >
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                  <path
                    d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"
                  ></path>
                  <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
              </a>
            </div>
          </div>
        </div>

        <div class="border-t border-slate-700 pt-8">
          <div class="flex flex-col md:flex-row justify-between items-center">
            <div class="text-slate-500 text-sm mb-4 md:mb-0">
              <p>&copy; 2025 PPLGTWO. Made with 😎</p>
            </div>
            <div class="flex items-center space-x-4">
              <span class="text-slate-500 text-xs">Powered by</span>
              <span class="text-primary text-xs font-semibold">xJAWW</span>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Loading Modal -->
    <div
      id="loading-modal"
      class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center"
    >
      <div class="glass-effect rounded-2xl p-8 text-center">
        <div
          class="animate-spin w-12 h-12 border-2 border-primary/30 border-t-primary rounded-full mx-auto mb-4"
        ></div>
        <p class="text-slate-300 font-medium">Loading...</p>
      </div>
    </div>

    <!-- Notification Container -->
    <div
      id="notification-container"
      class="fixed top-4 right-4 z-50 space-y-2"
    ></div>

    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      // Initialize AOS
      AOS.init({
        duration: 800, // Animation duration in milliseconds
        once: true, // Whether animation should happen only once - while scrolling down
        offset: 100, // Offset (in px) from the original trigger point
      });

      // API Helper Functions dengan Improved Error Handling
      const API = {
        async checkHealth() {
          try {
            const response = await fetch("/api/health", {
              method: "GET",
              headers: { "Cache-Control": "no-cache" },
            });
            return response.ok;
          } catch (error) {
            console.warn("Health check failed:", error);
            return false;
          }
        },

        async request(endpoint, options = {}) {
          try {
            const response = await fetch(`/api${endpoint}`, {
              headers: {
                "Content-Type": "application/json",
                "Cache-Control": "no-cache",
                ...options.headers,
              },
              ...options,
            });

            if (!response.ok) {
              const errorData = await response.json().catch(() => ({}));
              throw new Error(
                errorData.error ||
                  `HTTP ${response.status}: ${response.statusText}`
              );
            }

            return await response.json();
          } catch (error) {
            console.error("API Request failed:", error);
            throw error;
          }
        },

        // Gallery API
        async getGallery() {
          return this.request("/gallery");
        },

        // Structure API
        async getStructure() {
          return this.request("/structure");
        },

        // Confessions API
        async getConfessions() {
          return this.request("/confessions");
        },

        async postConfession(message) {
          return this.request("/confessions", {
            method: "POST",
            body: JSON.stringify({ message }),
          });
        },

        // Stats API
        async getStats() {
          return this.request("/stats");
        },
      };

      // Notification System
      function showNotification(message, type = "info", duration = 5000) {
        const container = document.getElementById("notification-container");
        const notification = document.createElement("div");

        const colors = {
          success: "bg-green-500 border-green-400",
          error: "bg-red-500 border-red-400",
          warning: "bg-yellow-500 border-yellow-400",
          info: "bg-blue-500 border-blue-400",
        };

        const icons = {
          success: "✅",
          error: "❌",
          warning: "⚠️",
          info: "ℹ️",
        };

        notification.className = `notification px-6 py-4 rounded-xl text-white font-medium shadow-2xl max-w-sm border-l-4 ${colors[type]} transform transition-all duration-300 translate-x-full`;

        notification.innerHTML = `
          <div class="flex items-start space-x-3">
            <div class="flex-shrink-0 text-lg">
              ${icons[type]}
            </div>
            <div class="flex-1">
              <p class="text-sm leading-relaxed">${message}</p>
            </div>
            <button class="ml-2 text-white/80 hover:text-white transition-colors" onclick="this.closest('.notification').remove()">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        `;

        container.appendChild(notification);

        // Animate in
        setTimeout(() => {
          notification.classList.remove("translate-x-full");
        }, 100);

        // Auto remove
        setTimeout(() => {
          if (notification.parentNode) {
            notification.classList.add("translate-x-full");
            setTimeout(() => {
              if (notification.parentNode) {
                notification.remove();
              }
            }, 300);
          }
        }, duration);
      }

      // Loading Modal
      function showLoading() {
        document.getElementById("loading-modal").classList.remove("hidden");
      }

      function hideLoading() {
        document.getElementById("loading-modal").classList.add("hidden");
      }

      // Character counter untuk confession textarea
      const confessMessage = document.getElementById("confess-message");
      const charCount = document.getElementById("char-count");

      if (confessMessage && charCount) {
        confessMessage.addEventListener("input", function () {
          const count = this.value.length;
          charCount.textContent = `${count}/500`;
          charCount.className =
            count > 450 ? "text-xs text-red-400" : "text-xs text-slate-500";
        });
      }

      // Load Gallery dengan API
      async function loadGallery() {
        const galleryLoading = document.getElementById("gallery-loading");
        const galleryContent = document.getElementById("gallery-content");
        const galleryControls = document.getElementById("gallery-controls");

        try {
          // Show loading
          galleryLoading.style.display = "grid";
          galleryContent.style.display = "none";
          galleryControls.style.display = "none";

          const gallery = await API.getGallery();

          // Hide loading
          galleryLoading.style.display = "none";
          galleryContent.style.display = "grid";
          galleryContent.innerHTML = "";

          if (gallery.length === 0) {
            galleryContent.innerHTML = `
              <div class="gallery-item" style="grid-column: 1 / -1; display: flex; align-items: center; justify-content: center; min-height: 400px;">
                <div class="text-center">
                  <div class="text-6xl mb-6">📸</div>
                  <h3 class="text-2xl font-semibold text-slate-300 mb-4">No Photos Yet</h3>
                  <p class="text-slate-400 mb-6">Photos uploaded from admin dashboard will appear here</p>
                  <div class="w-16 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
                </div>
              </div>
            `;
            document.getElementById("stat-gallery").textContent = "0";
            return;
          }

          // Update stats
          document.getElementById("stat-gallery").textContent = gallery.length;

          // Sort gallery: featured first, then by upload date
          const sortedGallery = [...gallery].sort((a, b) => {
            if (a.featured && !b.featured) return -1;
            if (!a.featured && b.featured) return 1;
            return new Date(b.uploadDate || 0) - new Date(a.uploadDate || 0);
          });

          // Render gallery items
          sortedGallery.forEach((photo, index) => {
            const galleryItem = document.createElement("div");
            galleryItem.className = `gallery-item ${
              photo.featured ? "featured" : ""
            } animate-fade-in`;
            galleryItem.style.animationDelay = `${index * 0.1}s`;

            galleryItem.innerHTML = `
              <img src="/assets/images/gallery/${photo.filename}" 
                   alt="${photo.title || "Gallery Image"}" 
                   loading="lazy"
                   onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjNjM2NmYxIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5HYWxsZXJ5IEltYWdlPC90ZXh0Pjwvc3ZnPg=='">
              
              <div class="gallery-overlay">
                <div class="text-white">
                  ${
                    photo.featured
                      ? '<span class="inline-block px-3 py-1 bg-yellow-500/80 text-yellow-900 rounded-full text-sm mb-3 font-semibold">Featured</span><br>'
                      : ""
                  }
                  <h3 class="text-xl font-bold mb-2">${
                    photo.title || "Untitled"
                  }</h3>
                  <p class="text-gray-200 text-sm">${
                    photo.description || "No description"
                  }</p>
                </div>
              </div>
            `;

            galleryContent.appendChild(galleryItem);
          });

          // Show "Load More" if there are many photos (optional feature)
          if (gallery.length > 12) {
            galleryControls.style.display = "block";
          }
        } catch (error) {
          console.error("Error loading gallery:", error);
          galleryLoading.style.display = "none";
          galleryContent.style.display = "grid";
          galleryContent.innerHTML = `
            <div class="gallery-item" style="grid-column: 1 / -1; display: flex; align-items: center; justify-content: center; min-height: 400px;">
              <div class="text-center">
                <div class="text-6xl mb-6">❌</div>
                <h3 class="text-xl font-semibold text-red-400 mb-4">Failed to Load Gallery</h3>
                <p class="text-slate-400 mb-6">Please check your connection and try again</p>
                <button onclick="loadGallery()" class="px-6 py-3 bg-primary hover:bg-primary/80 rounded-lg font-medium transition-colors">
                  Try Again
                </button>
              </div>
            </div>
          `;
        }
      }

      // Load Structure dengan API
      async function loadStructure() {
        const structureLoading = document.getElementById("structure-loading");
        const structureContent = document.getElementById("structure-content");

        try {
          // Show loading
          structureLoading.style.display = "grid";
          structureContent.style.display = "none";

          const structure = await API.getStructure();

          // Hide loading
          structureLoading.style.display = "none";
          structureContent.style.display = "flex";
          structureContent.innerHTML = "";

          if (structure.length === 0) {
            structureContent.innerHTML = `
              <div class="w-full text-center py-16">
                <div class="text-6xl mb-6">👥</div>
                <h3 class="text-2xl font-semibold text-slate-300 mb-4">No Structure Data</h3>
                <p class="text-slate-400">Class structure will be loaded from admin dashboard</p>
              </div>
            `;
            return;
          }

          // Group by levels
          const levels = {
            leader: structure.filter(
              (m) => m.level === "leader" || m.position === "Wali Kelas"
            ),
            executive: structure.filter(
              (m) =>
                m.level === "executive" ||
                ["Ketua Kelas", "Wakil Ketua"].includes(m.position)
            ),
            staff: structure.filter(
              (m) =>
                m.level === "staff" ||
                m.position.includes("Sekretaris") ||
                m.position.includes("Bendahara")
            ),
            division: structure.filter(
              (m) =>
                m.level === "division" ||
                ["Keamanan", "Rohani", "Kebersihan"].some((d) =>
                  m.position.includes(d)
                )
            ),
          };

          // Render each level
          ["leader", "executive", "staff", "division"].forEach(
            (levelName, levelIndex) => {
              if (levels[levelName].length > 0) {
                const levelDiv = document.createElement("div");
                levelDiv.className = "org-level";

                levels[levelName].forEach((member, index) => {
                  const card = document.createElement("div");
                  card.className = `org-card ${levelName} animate-fade-in`;
                  card.style.animationDelay = `${
                    levelIndex * 0.2 + index * 0.1
                  }s`;
                  card.innerHTML = `
                  <div class="text-4xl mb-4">${member.icon}</div>
                  <h3 class="text-lg font-space font-bold ${getColorClass(
                    levelName
                  )} mb-2">${member.position}</h3>
                  <p class="text-slate-300 font-medium mb-3">${member.name}</p>
                  <div class="text-xs text-slate-400 ${getBgColorClass(
                    levelName
                  )} px-3 py-1 rounded-full">
                    ${getLevelLabel(levelName)}
                  </div>
                `;
                  levelDiv.appendChild(card);
                });

                structureContent.appendChild(levelDiv);
              }
            }
          );
        } catch (error) {
          console.error("Error loading structure:", error);
          structureLoading.style.display = "none";
          structureContent.style.display = "flex";
          structureContent.innerHTML = `
            <div class="w-full text-center py-16">
              <div class="text-6xl mb-6">❌</div>
              <h3 class="text-xl font-semibold text-red-400 mb-4">Failed to Load Structure</h3>
              <p class="text-slate-400 mb-6">Please check your connection and try again</p>
              <button onclick="loadStructure()" class="px-6 py-3 bg-primary hover:bg-primary/80 rounded-lg font-medium transition-colors">
                Try Again
              </button>
            </div>
          `;
        }
      }

      // Helper functions untuk structure styling
      function getColorClass(level) {
        const colors = {
          leader: "text-primary",
          executive: "text-secondary",
          staff: "text-accent",
          division: "text-primary",
        };
        return colors[level] || "text-primary";
      }

      function getBgColorClass(level) {
        const bgColors = {
          leader: "bg-primary/10",
          executive: "bg-secondary/10",
          staff: "bg-accent/10",
          division: "bg-primary/10",
        };
        return bgColors[level] || "bg-primary/10";
      }

      function getLevelLabel(level) {
        const labels = {
          leader: "Pembimbing",
          executive: "Leadership",
          staff: "Core Staff",
          division: "Division",
        };
        return labels[level] || "Staff";
      }

      // Load Confessions dengan API dan Retry Logic
      async function loadConfessions(retryCount = 0) {
        const confessList = document.getElementById("confess-list");
        const maxRetries = 3;
        const retryDelay = 1000;

        try {
          // Show loading state
          if (retryCount === 0) {
            confessList.innerHTML =
              '<div id="confess-loading" class="text-center py-12"><div class="animate-spin w-8 h-8 border-2 border-primary/30 border-t-primary rounded-full mx-auto mb-4"></div><p class="text-slate-400">Loading confessions...</p></div>';
          } else {
            confessList.innerHTML = `<div id="confess-loading" class="text-center py-12"><div class="animate-spin w-8 h-8 border-2 border-primary/30 border-t-primary rounded-full mx-auto mb-4"></div><p class="text-slate-400">Retrying... (${retryCount}/${maxRetries})</p></div>`;
          }

          const confessions = await API.getConfessions();

          confessList.innerHTML = "";

          if (confessions.length === 0) {
            confessList.innerHTML = `
              <div class="text-center py-16">
                <div class="text-6xl mb-6">💭</div>
                <h3 class="text-xl font-semibold text-slate-300 mb-2">Belum Ada Pesan</h3>
                <p class="text-slate-400 mb-4">Jadilah yang pertama berbagi perasaan secara anonim!</p>
                <div class="w-16 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
              </div>
            `;
            return;
          }

          const confessionsHTML = confessions
            .slice()
            .reverse()
            .map(
              (confess, index) => `
              <div class="glass-effect rounded-xl p-6 border-l-4 border-primary animate-fade-in hover-glow transition-all duration-300"
                   style="animation-delay: ${index * 0.1}s">
                <div class="flex items-start space-x-4">
                  <div class="flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-r from-primary/30 to-secondary/30 flex items-center justify-center">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                  </div>
                  <div class="flex-1">
                    <p class="text-slate-200 leading-relaxed mb-3">"${confess.message
                      .replace(/</g, "&lt;")
                      .replace(/>/g, "&gt;")}"</p>
                    <div class="flex items-center justify-between">
                      <span class="text-slate-500 text-xs">Anonymous</span>
                      <span class="text-slate-500 text-xs">${formatDate(
                        confess.timestamp
                      )}</span>
                    </div>
                  </div>
                </div>
              </div>
            `
            )
            .join("");

          confessList.innerHTML = confessionsHTML;
          console.log("✅ Confessions loaded successfully");
        } catch (error) {
          console.error("Error loading confessions:", error);

          // Retry logic
          if (retryCount < maxRetries) {
            console.log(
              `🔄 Retrying confession load (${retryCount + 1}/${maxRetries})...`
            );
            setTimeout(() => {
              loadConfessions(retryCount + 1);
            }, retryDelay * (retryCount + 1));
            return;
          }

          // Show error state after max retries
          confessList.innerHTML = `
            <div class="text-center py-16 glass-effect rounded-xl border border-red-500/20">
              <div class="text-6xl mb-6">⚠️</div>
              <h3 class="text-xl font-semibold text-red-400 mb-2">Gagal Memuat Confessions</h3>
              <p class="text-slate-400 mb-6">Pastikan server backend berjalan dengan baik</p>
              <button onclick="loadConfessions()" class="px-6 py-2 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-500/30 transition-colors duration-300">
                Coba Lagi
              </button>
            </div>
          `;
        }
      }

      // Update Stats
      async function updateStats() {
        try {
          const stats = await API.getStats();
          document.getElementById("stat-gallery").textContent =
            stats.gallery || 0;
        } catch (error) {
          console.error("Error loading stats:", error);
        }
      }

      // Confession Form Handler
      const confessForm = document.getElementById("confess-form");
      const confessMessageInput = document.getElementById("confess-message");
      const submitButton = confessForm?.querySelector('button[type="submit"]');
      const submitText = document.getElementById("submit-text");
      const refreshButton = document.getElementById("refresh-confessions");

      if (confessForm) {
        confessForm.addEventListener("submit", async function (e) {
          e.preventDefault();
          const message = confessMessageInput.value.trim();

          if (message === "") {
            showNotification("Pesan tidak boleh kosong!", "error");
            return;
          }

          if (message.length > 500) {
            showNotification(
              "Pesan terlalu panjang! Maksimal 500 karakter.",
              "error"
            );
            return;
          }

          // Show loading state
          const originalText = submitText.innerHTML;
          submitText.innerHTML = "Mengirim...";
          submitButton.disabled = true;
          submitButton.classList.add("opacity-50");

          try {
            await API.postConfession(message);

            confessMessageInput.value = "";
            charCount.textContent = "0/500";
            loadConfessions();
            showNotification("Pesan berhasil dikirim! 🎉", "success");
          } catch (error) {
            console.error("Error:", error);
            showNotification(
              error.message || "Terjadi kesalahan saat mengirim pesan",
              "error"
            );
          } finally {
            // Reset button
            submitText.innerHTML = originalText;
            submitButton.disabled = false;
            submitButton.classList.remove("opacity-50");
          }
        });
      }

      // Refresh confessions
      if (refreshButton) {
        refreshButton.addEventListener("click", loadConfessions);
      }

      // Utility Functions
      function formatDate(timestamp) {
        if (!timestamp) return "Just now";
        try {
          const date = new Date(timestamp);
          const now = new Date();
          const diff = now - date;

          if (diff < 60000) return "Just now";
          if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;
          if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;
          if (diff < 604800000) return `${Math.floor(diff / 86400000)}d ago`;
          return date.toLocaleDateString();
        } catch (error) {
          return "Just now";
        }
      }

      // Mobile Menu Handler
      const mobileMenuButton = document.getElementById("mobile-menu-button");
      const mobileMenu = document.getElementById("mobile-menu");

      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener("click", () => {
          mobileMenu.classList.toggle("hidden");
        });

        document.addEventListener("click", (e) => {
          if (
            !mobileMenuButton.contains(e.target) &&
            !mobileMenu.contains(e.target)
          ) {
            mobileMenu.classList.add("hidden");
          }
        });

        document.querySelectorAll("#mobile-menu a").forEach((link) => {
          link.addEventListener("click", () => {
            mobileMenu.classList.add("hidden");
          });
        });
      }

      // Smooth Scrolling untuk Navigation
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            const offsetTop = target.offsetTop - 80;
            window.scrollTo({
              top: offsetTop,
              behavior: "smooth",
            });
          }
        });
      });

      // Active Navigation Highlighting
      function updateActiveNavigation() {
        let current = "";
        const sections = document.querySelectorAll("section[id]");

        sections.forEach((section) => {
          const sectionTop = section.offsetTop - 100;
          if (pageYOffset >= sectionTop) {
            current = section.getAttribute("id");
          }
        });

        document.querySelectorAll(".nav-link").forEach((link) => {
          link.classList.remove("text-primary");
          if (link.getAttribute("href") === `#${current}`) {
            link.classList.add("text-primary");
          }
        });
      }

      // Debounce function untuk optimisasi performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Scroll event handler dengan debounce
      const debouncedScrollHandler = debounce(() => {
        updateActiveNavigation();

        // Update navbar background based on scroll position
        const navbar = document.querySelector("header");
        if (window.scrollY > 50) {
          navbar.classList.add("backdrop-blur-xl");
          navbar.style.background = "rgba(15, 23, 42, 0.95)";
        } else {
          navbar.classList.remove("backdrop-blur-xl");
          navbar.style.background = "rgba(15, 23, 42, 0.9)";
        }
      }, 10);

      window.addEventListener("scroll", debouncedScrollHandler);

      // Intersection Observer untuk Animations (Fallback for AOS)
      const observeElements = document.querySelectorAll(
        ".animate-fade-in, .animate-slide-up"
      );

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.style.opacity = "1";
              entry.target.style.transform = "translateY(0)";
              observer.unobserve(entry.target);
            }
          });
        },
        {
          threshold: 0.1,
          rootMargin: "50px",
        }
      );

      observeElements.forEach((el) => {
        el.style.opacity = "0";
        el.style.transform = "translateY(30px)";
        el.style.transition = "all 0.8s ease-out";
        observer.observe(el);
      });

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        // Alt + A untuk buka admin dashboard
        if (e.altKey && e.key === "a") {
          e.preventDefault();
          window.open("/admin", "_blank");
        }

        // Escape key untuk close notifications
        if (e.key === "Escape") {
          document.querySelectorAll(".notification").forEach((n) => n.remove());
        }

        // Ctrl+Enter untuk submit confession form
        if (e.key === "Enter" && e.ctrlKey) {
          if (e.target.id === "confess-message") {
            e.preventDefault();
            confessForm.dispatchEvent(new Event("submit"));
          }
        }
      });

      // Right-click context menu untuk admin access (hidden feature)
      document.addEventListener("contextmenu", function (e) {
        if (e.ctrlKey && e.shiftKey) {
          e.preventDefault();
          const adminPrompt = prompt("Enter admin access code:");
          if (adminPrompt === "pplgtwo2025") {
            window.open("/admin", "_blank");
            showNotification("Admin dashboard opened!", "success");
          }
        }
      });

      // Auto-refresh confessions dengan improved logic
      let autoRefreshInterval;
      let consecutiveErrors = 0;
      const maxConsecutiveErrors = 3;

      function startAutoRefresh() {
        if (autoRefreshInterval) {
          clearInterval(autoRefreshInterval);
        }

        autoRefreshInterval = setInterval(async () => {
          if (!document.hidden) {
            try {
              const healthCheck = await API.checkHealth();
              if (healthCheck) {
                await loadConfessions();
                consecutiveErrors = 0;
              } else {
                throw new Error("Server health check failed");
              }
            } catch (error) {
              consecutiveErrors++;
              console.warn(
                `Auto-refresh failed (${consecutiveErrors}/${maxConsecutiveErrors}):`,
                error
              );

              if (consecutiveErrors >= maxConsecutiveErrors) {
                console.warn(
                  "Too many consecutive errors, stopping auto-refresh"
                );
                stopAutoRefresh();
                showNotification(
                  "Auto-refresh stopped due to connection issues. Click refresh to try again.",
                  "warning",
                  8000
                );
              }
            }
          }
        }, 30000);
      }

      function stopAutoRefresh() {
        if (autoRefreshInterval) {
          clearInterval(autoRefreshInterval);
          autoRefreshInterval = null;
        }
        consecutiveErrors = 0;
      }

      // Handle visibility change untuk pause/resume auto-refresh
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          stopAutoRefresh();
        } else {
          startAutoRefresh();
          loadConfessions();
        }
      });

      // Load settings dari API (optional)
      async function loadSettings() {
        try {
          const response = await fetch("/api/settings");
          if (response.ok) {
            const settings = await response.json();

            if (settings.siteName) {
              document.getElementById("site-brand").textContent =
                settings.siteName;
              document.getElementById("site-title").textContent =
                settings.siteName;
              document.getElementById("footer-brand").textContent =
                settings.siteName;
            }

            if (settings.siteDescription) {
              document.getElementById("site-description").innerHTML =
                settings.siteDescription;
            }

            if (settings.welcomeText) {
              document.getElementById("welcome-text").textContent =
                settings.welcomeText;
            }

            if (settings.siteTitle) {
              document.title = settings.siteTitle;
            }
          }
        } catch (error) {
          console.warn("Failed to load settings:", error);
        }
      }

      // Initialize Everything saat DOM loaded
      document.addEventListener("DOMContentLoaded", async () => {
        console.log("🚀 Initializing PPLGTWO Website...");

        // Add smooth loading animation
        document.body.style.opacity = "0";
        document.body.style.transition = "opacity 0.5s ease-in-out";

        try {
          showLoading();

          // Check server health first
          const serverHealthy = await API.checkHealth();
          if (!serverHealthy) {
            console.warn(
              "Server health check failed, continuing with degraded functionality"
            );
          }

          // Load sections with individual error handling
          const results = await Promise.allSettled([
            loadSettings(),
            loadGallery(),
            loadStructure(),
            updateStats(),
          ]);

          // Check for any failures
          const failures = results.filter(
            (result) => result.status === "rejected"
          );
          if (failures.length > 0) {
            console.warn("Some sections failed to load:", failures);
            showNotification(
              `${failures.length} section(s) failed to load`,
              "warning"
            );
          }

          // Load confessions separately with delay
          setTimeout(() => {
            loadConfessions();
          }, 100);

          hideLoading();

          // Fade in body
          setTimeout(() => {
            document.body.style.opacity = "1";
          }, 100);

          // Start auto-refresh if not hidden
          if (!document.hidden) {
            startAutoRefresh();
          }

          console.log("✅ Website initialized successfully");
        } catch (error) {
          console.error("❌ Error initializing website:", error);
          hideLoading();

          showNotification(
            "Failed to connect to server. Please check if the backend is running.",
            "error",
            10000
          );

          // Still try to load confessions
          setTimeout(() => {
            loadConfessions();
          }, 2000);

          // Still fade in body
          setTimeout(() => {
            document.body.style.opacity = "1";
          }, 100);
        }
      });

      // Cleanup on page unload
      window.addEventListener("beforeunload", () => {
        stopAutoRefresh();
      });

      // Global error handler
      window.addEventListener("error", (event) => {
        console.error("Global error:", event.error);
        showNotification("An unexpected error occurred", "error");
      });

      // Handle unhandled promise rejections
      window.addEventListener("unhandledrejection", (event) => {
        console.error("Unhandled promise rejection:", event.reason);
        showNotification("A network error occurred", "error");
        event.preventDefault();
      });

      // Console easter egg
      console.log(`
        ╔══════════════════════════════════════╗
        ║              PPLGTWO                 ║
        ║        Website Kelas v2.0            ║
        ║                                      ║
        ║  🎨 Dynamic Gallery Loading         ║
        ║  👥 Real-time Structure Updates     ║
        ║  💭 Live Anonymous Confessions       ║
        ║  📊 Auto-updating Statistics         ║
        ║  🔄 Robust Error Handling            ║
        ║  ⚡ Performance Optimized            ║
        ║                                      ║
        ║  Made with ❤️ by PPLGTWO Class      ║
        ║  Happy exploring! 🚀                ║
        ╚══════════════════════════════════════╝
      `);

      // Export functions untuk debugging (development only)
      if (
        window.location.hostname === "localhost" ||
        window.location.hostname === "127.0.0.1"
      ) {
        window.PPLGTWO_DEBUG = {
          loadGallery,
          loadStructure,
          loadConfessions,
          loadSettings,
          updateStats,
          showNotification,
          API,
          startAutoRefresh,
          stopAutoRefresh,
        };
        console.log(
          "🔧 Debug mode enabled. Access PPLGTWO_DEBUG object for utilities."
        );
      }

      // Performance monitoring
      window.addEventListener("load", () => {
        if (window.performance && window.performance.timing) {
          const loadTime =
            window.performance.timing.loadEventEnd -
            window.performance.timing.navigationStart;
          console.log(`⏱️ Page load time: ${loadTime}ms`);
        }
      });

      // Feature detection
      function checkFeatureSupport() {
        const features = {
          fetch: typeof fetch !== "undefined",
          intersectionObserver: "IntersectionObserver" in window,
          customScrollbar: CSS.supports("backdrop-filter", "blur(10px)"),
          gridLayout: CSS.supports("display", "grid"),
        };

        console.log("🔍 Feature support:", features);

        if (!features.fetch) {
          console.warn(
            "⚠️ Fetch API not supported. Some features may not work."
          );
        }

        if (!features.intersectionObserver) {
          console.warn(
            "⚠️ IntersectionObserver not supported. Animations may be limited."
          );
        }

        return features;
      }

      // Initialize feature detection
      checkFeatureSupport();

      // PWA hint
      if ("serviceWorker" in navigator) {
        console.log("💡 This website could be enhanced with PWA features!");
      }
    </script>
  </body>
</html>
